webpackJsonp([18],{YlU8:function(e,l,t){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var i={name:"PhysicalModeling",components:{OrgView:function(){return t.e(43).then(t.bind(null,"s/J3"))},PhyTable:function(){return t.e(50).then(t.bind(null,"/0QL"))},HeaderLayout:function(){return t.e(38).then(t.bind(null,"ljU8"))}},data:function(){return{changeLog:"updated by Bai Xiaoran,2019/03/15,11:00AM",showTree:!0,datas:{id:0,label:"XXX科技",level:1,children:[{id:2,label:"产品研发部",level:2,children:[{id:5,label:"研发-前端",level:3,children:[]},{id:6,label:"研发-后端",level:3,children:[]},{id:9,label:"UI设计",level:3,children:[{id:12,label:"第四层",level:4,children:[]},{id:13,label:"第四层",level:4,children:[]},{id:14,label:"第四层",level:4,children:[]},{id:15,label:"第四层",level:4,children:[]}]},{id:10,label:"产品经理",level:3,children:[]},{id:20,label:"产品经理",level:3,children:[{id:16,label:"第四层",level:4,children:[]},{id:17,label:"第四层",level:4,children:[]}]}]},{id:3,label:"销售部",level:2,children:[{id:7,label:"销售一部",level:3,children:[]},{id:8,label:"销售二部",level:3,children:[{id:18,label:"第四层",level:4,children:[]},{id:19,label:"第四层",level:4,children:[]}]}]},{id:4,label:"财务部",level:2,children:[]},{id:11,label:"HR人事",level:2,children:[]}]},dialogVisible_add:!1,dialogVisible_delete:!1,dialogVisible_edit:!1,dialogVisible_detail:!1,selectedNode:{label:""},addForm:{label:""},editForm:{label:""},detailForm:{label:""},maxNodeId:0,hackReset:!0}},computed:{},methods:{goBack:function(){this.showTree=!0},doExport:function(){console.log(this.datas),this.datas.label="test"},_mapData:function(e,l){var t=this;l(e);var i=e.children;i&&i.forEach(function(e){t._mapData(e,l)})},updataMaxNodeId:function(){var e=this;this._mapData(this.datas,function(l){e.maxNodeId=l.id>e.maxNodeId?l.id:e.maxNodeId})},setDepartmentData:function(e){return e.isRoot=!0,e},handleNodeClick:function(e,l,t){this.selectedNode=l,this.showTree=!1},getDepartmentData:function(){},handleButtonClick:function(e){var l=e.key,t=e.data;"add"==l?(this.dialogVisible_add=!0,this.addForm.label=""):"delete"==l?this.dialogVisible_delete=!0:"edit"==l?(this.dialogVisible_edit=!0,this.editForm.label=t.label):this.dialogVisible_detail=!0,this.selectedNode=t},handleClose:function(e){this.$confirm("确认关闭？").then(function(l){e()}).catch(function(e){})},addNode:function(){var e=this;this.updataMaxNodeId(),this.dialogVisible_add=!1;var l={id:this.maxNodeId+1,label:this.addForm.label,level:this.selectedNode.level+1,children:new Array};this._mapData(this.datas,function(t){if(t.id==e.selectedNode.id){var i=t.children;void 0!==i&&null!==i&&i!==[]||(t.children=Array(),!0),t.children.push(l)}}),3!=this.selectedNode.level||this.selectedNode.expand||this.$refs.myOrgView.$refs.myOrgTree.handleExpand(this.selectedNode)},deleteNode:function(){var e=this;this.dialogVisible_delete=!1,this._mapData(this.datas,function(l){if(null!=l.children)for(var t=l.children,i=0;i<l.children.length;i++)t[i].id==e.selectedNode.id&&t.splice(i,1)})},editNode:function(){var e=this;this.dialogVisible_edit=!1,this._mapData(this.datas,function(l){l.id==e.selectedNode.id&&(l.label=e.editForm.label)})},detailNode:function(){}},mounted:function(){this.getDepartmentData()}},a={render:function(){var e=this,l=e.$createElement,t=e._self._c||l;return t("div",[t("el-row",[t("header-layout",{staticClass:"header-layout",attrs:{head_title:"Physical Modeling"}})],1),e._v(" "),t("el-card",{staticClass:"box-card"},[e.showTree?t("div",{staticClass:"view-box"},[e.hackReset?t("OrgView",{ref:"myOrgView",attrs:{data:e.datas,"zoom-handled":.9},on:{"on-node-click":e.handleNodeClick,on_button_click:e.handleButtonClick}}):e._e()],1):e._e(),e._v(" "),e.showTree?e._e():t("PhyTable",{attrs:{selectedNode:e.selectedNode},on:{"go-back":e.goBack,on_button_click:e.handleButtonClick},model:{value:e.datas,callback:function(l){e.datas=l},expression:"datas"}})],1),e._v(" "),t("el-dialog",{attrs:{title:"添加信息",visible:e.dialogVisible_add,width:"30%","before-close":e.handleClose},on:{"update:visible":function(l){e.dialogVisible_add=l}}},[t("el-form",{ref:"form",attrs:{model:e.addForm,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"结点名称: "}},[t("el-input",{model:{value:e.addForm.label,callback:function(l){e.$set(e.addForm,"label",l)},expression:"addForm.label"}})],1)],1),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(l){e.dialogVisible_add=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.addNode}},[e._v("确 定")])],1)],1),e._v(" "),t("el-dialog",{attrs:{title:"删除信息",visible:e.dialogVisible_delete,width:"30%","before-close":e.handleClose},on:{"update:visible":function(l){e.dialogVisible_delete=l}}},[t("span",[e._v("确定要删除"+e._s(null==e.selectedNode?"":e.selectedNode.label)+"吗？")]),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(l){e.dialogVisible_delete=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.deleteNode}},[e._v("确 定")])],1)]),e._v(" "),t("el-dialog",{attrs:{title:"编辑信息",visible:e.dialogVisible_edit,width:"30%","before-close":e.handleClose},on:{"update:visible":function(l){e.dialogVisible_edit=l}}},[t("el-form",{ref:"form",attrs:{model:e.editForm,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"结点名称: "}},[t("el-input",{model:{value:e.editForm.label,callback:function(l){e.$set(e.editForm,"label",l)},expression:"editForm.label"}})],1)],1),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(l){e.dialogVisible_edit=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.editNode}},[e._v("确 定")])],1)],1),e._v(" "),t("el-dialog",{attrs:{title:"详细信息",visible:e.dialogVisible_detail,width:"30%","before-close":e.handleClose},on:{"update:visible":function(l){e.dialogVisible_detail=l}}},[t("span",[e._v(e._s(null==e.selectedNode?"":e.selectedNode.label))]),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(l){e.dialogVisible_detail=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(l){e.dialogVisible_detail=!1}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var d=t("C7Lr")(i,a,!1,function(e){t("Zsc1")},"data-v-7a0e963c",null);l.default=d.exports},Zsc1:function(e,l){}});
//# sourceMappingURL=18.249344aa4108fcf4121b.js.map